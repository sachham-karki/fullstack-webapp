{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Sachham/OneDrive/Desktop/Self-learning/blog-webapp/blog/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Sachham/OneDrive/Desktop/Self-learning/blog-webapp/blog/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Sachham/OneDrive/Desktop/Self-learning/blog-webapp/blog/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import AddCommentForm from\"../components/AddCommentForm\";import CommentsList from\"../components/CommentsList\";import UpvoteSection from\"../components/UpvotesSection\";import{useState,useEffect}from\"react\";import NotFoundPage from\"./NotFoundPage\";import articleContent from\"./article-content\";import{useParams}from\"react-router-dom\";import ArticlesList from\"../components/ArticleList\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ArticlePage=function ArticlePage(){var _useParams=useParams(),cat=_useParams.cat;var article=articleContent.find(function(article){return article.name===cat;});var _useState=useState({upvotes:0,comments:[]}),_useState2=_slicedToArray(_useState,2),articleInfo=_useState2[0],setArticleInfo=_useState2[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var result,body;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/api/articles/\".concat(cat));case 2:result=_context.sent;_context.next=5;return result.json();case 5:body=_context.sent;console.log(body);setArticleInfo(body);case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();// setArticleInfo({ upvotes: Math.ceil(Math.random() * 10) });\n},[cat]);if(!article)return/*#__PURE__*/_jsx(NotFoundPage,{const:true,dog:cat});var otherArticles=articleContent.filter(function(article){return article.name!==cat;});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"h1\",{class:\"fancy\",children:[\" \",article.title]})}),/*#__PURE__*/_jsx(UpvoteSection,{articleName:cat,upvotes:articleInfo.upvotes,setArticleInfo:setArticleInfo}),article.content.map(function(paragraph,key){return/*#__PURE__*/_jsx(\"p\",{children:paragraph},key);}),/*#__PURE__*/_jsx(CommentsList,{comments:articleInfo.comments}),/*#__PURE__*/_jsx(\"h3\",{children:\"Other Articles:\"}),/*#__PURE__*/_jsx(AddCommentForm,{articleName:cat,setArticleInfo:setArticleInfo}),/*#__PURE__*/_jsx(ArticlesList,{articles:otherArticles})]});};export default ArticlePage;","map":{"version":3,"names":["React","AddCommentForm","CommentsList","UpvoteSection","useState","useEffect","NotFoundPage","articleContent","useParams","ArticlesList","ArticlePage","cat","article","find","name","upvotes","comments","articleInfo","setArticleInfo","fetchData","fetch","result","json","body","console","log","otherArticles","filter","title","content","map","paragraph","key"],"sources":["C:/Users/Sachham/OneDrive/Desktop/Self-learning/blog-webapp/blog/src/pages/ArticlePage.js"],"sourcesContent":["import React from \"react\";\r\nimport AddCommentForm from \"../components/AddCommentForm\";\r\nimport CommentsList from \"../components/CommentsList\";\r\nimport UpvoteSection from \"../components/UpvotesSection\";\r\nimport { useState, useEffect } from \"react\";\r\nimport NotFoundPage from \"./NotFoundPage\";\r\nimport articleContent from \"./article-content\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport ArticlesList from \"../components/ArticleList\";\r\nconst ArticlePage = () => {\r\n  const { cat } = useParams();\r\n  const article = articleContent.find((article) => article.name === cat);\r\n\r\n  const [articleInfo, setArticleInfo] = useState({ upvotes: 0, comments: [] });\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      const result = await fetch(`/api/articles/${cat}`);\r\n      const body = await result.json();\r\n      console.log(body);\r\n      setArticleInfo(body);\r\n    };\r\n    fetchData();\r\n    // setArticleInfo({ upvotes: Math.ceil(Math.random() * 10) });\r\n  }, [cat]);\r\n\r\n  if (!article) return <NotFoundPage const dog={cat} />;\r\n\r\n  const otherArticles = articleContent.filter(\r\n    (article) => article.name !== cat\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <header>\r\n        <h1 class=\"fancy\"> {article.title}</h1>\r\n      </header>\r\n      <UpvoteSection\r\n        articleName={cat}\r\n        upvotes={articleInfo.upvotes}\r\n        setArticleInfo={setArticleInfo}\r\n      />\r\n\r\n      {article.content.map((paragraph, key) => (\r\n        <p key={key}>{paragraph}</p>\r\n      ))}\r\n      <CommentsList comments={articleInfo.comments} />\r\n      <h3>Other Articles:</h3>\r\n      <AddCommentForm articleName={cat} setArticleInfo={setArticleInfo} />\r\n      <ArticlesList articles={otherArticles} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ArticlePage;\r\n"],"mappings":"kdAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,MAAOC,eAAP,KAA2B,8BAA3B,CACA,MAAOC,aAAP,KAAyB,4BAAzB,CACA,MAAOC,cAAP,KAA0B,8BAA1B,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,aAAP,KAAyB,gBAAzB,CACA,MAAOC,eAAP,KAA2B,mBAA3B,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,MAAOC,aAAP,KAAyB,2BAAzB,C,6IACA,GAAMC,YAAW,CAAG,QAAdA,YAAc,EAAM,CACxB,eAAgBF,SAAS,EAAzB,CAAQG,GAAR,YAAQA,GAAR,CACA,GAAMC,QAAO,CAAGL,cAAc,CAACM,IAAf,CAAoB,SAACD,OAAD,QAAaA,QAAO,CAACE,IAAR,GAAiBH,GAA9B,EAApB,CAAhB,CAEA,cAAsCP,QAAQ,CAAC,CAAEW,OAAO,CAAE,CAAX,CAAcC,QAAQ,CAAE,EAAxB,CAAD,CAA9C,wCAAOC,WAAP,eAAoBC,cAApB,eAEAb,SAAS,CAAC,UAAM,CACd,GAAMc,UAAS,4FAAG,2KACKC,MAAK,yBAAkBT,GAAlB,EADV,QACVU,MADU,qCAEGA,OAAM,CAACC,IAAP,EAFH,QAEVC,IAFU,eAGhBC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACAL,cAAc,CAACK,IAAD,CAAd,CAJgB,sDAAH,kBAATJ,UAAS,0CAAf,CAMAA,SAAS,GACT;AACD,CATQ,CASN,CAACR,GAAD,CATM,CAAT,CAWA,GAAI,CAACC,OAAL,CAAc,mBAAO,KAAC,YAAD,EAAc,KAAK,KAAnB,CAAoB,GAAG,CAAED,GAAzB,EAAP,CAEd,GAAMe,cAAa,CAAGnB,cAAc,CAACoB,MAAf,CACpB,SAACf,OAAD,QAAaA,QAAO,CAACE,IAAR,GAAiBH,GAA9B,EADoB,CAAtB,CAIA,mBACE,wCACE,qCACE,YAAI,KAAK,CAAC,OAAV,eAAoBC,OAAO,CAACgB,KAA5B,GADF,EADF,cAIE,KAAC,aAAD,EACE,WAAW,CAAEjB,GADf,CAEE,OAAO,CAAEM,WAAW,CAACF,OAFvB,CAGE,cAAc,CAAEG,cAHlB,EAJF,CAUGN,OAAO,CAACiB,OAAR,CAAgBC,GAAhB,CAAoB,SAACC,SAAD,CAAYC,GAAZ,qBACnB,mBAAcD,SAAd,EAAQC,GAAR,CADmB,EAApB,CAVH,cAaE,KAAC,YAAD,EAAc,QAAQ,CAAEf,WAAW,CAACD,QAApC,EAbF,cAcE,uCAdF,cAeE,KAAC,cAAD,EAAgB,WAAW,CAAEL,GAA7B,CAAkC,cAAc,CAAEO,cAAlD,EAfF,cAgBE,KAAC,YAAD,EAAc,QAAQ,CAAEQ,aAAxB,EAhBF,GADF,CAoBD,CA3CD,CA6CA,cAAehB,YAAf"},"metadata":{},"sourceType":"module"}